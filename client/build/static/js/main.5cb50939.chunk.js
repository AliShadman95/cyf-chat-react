(this.webpackJsonpnodejschat=this.webpackJsonpnodejschat||[]).push([[0],{141:function(e,t,a){e.exports=a.p+"static/media/001-man-13.15712c0a.svg"},142:function(e,t,a){e.exports=a.p+"static/media/002-woman-14.2414c095.svg"},143:function(e,t,a){e.exports=a.p+"static/media/003-woman-13.0edc384b.svg"},144:function(e,t,a){e.exports=a.p+"static/media/004-woman-12.4cc23eec.svg"},145:function(e,t,a){e.exports=a.p+"static/media/005-woman-11.4b92798f.svg"},146:function(e,t,a){e.exports=a.p+"static/media/006-woman-10.34ec441d.svg"},147:function(e,t,a){e.exports=a.p+"static/media/007-woman-9.bfbe8a5a.svg"},148:function(e,t,a){e.exports=a.p+"static/media/008-woman-8.359a04b3.svg"},149:function(e,t,a){e.exports=a.p+"static/media/009-woman-7.097950b2.svg"},150:function(e,t,a){e.exports=a.p+"static/media/010-woman-6.56caf7d3.svg"},151:function(e,t,a){e.exports=a.p+"static/media/011-woman-5.2c13d4c4.svg"},152:function(e,t,a){e.exports=a.p+"static/media/012-woman-4.10dedf9a.svg"},153:function(e,t,a){e.exports=a.p+"static/media/013-woman-3.ccd33987.svg"},154:function(e,t,a){e.exports=a.p+"static/media/014-man-12.647a2b5b.svg"},155:function(e,t,a){e.exports=a.p+"static/media/015-man-11.4c2513c3.svg"},156:function(e,t,a){e.exports=a.p+"static/media/016-man-10.b131a5ec.svg"},157:function(e,t,a){e.exports=a.p+"static/media/017-man-9.dfcb8c75.svg"},158:function(e,t,a){e.exports=a.p+"static/media/018-man-8.46ed9461.svg"},159:function(e,t,a){e.exports=a.p+"static/media/019-man-7.24286cc5.svg"},160:function(e,t,a){e.exports=a.p+"static/media/020-man-6.378c61cb.svg"},161:function(e,t,a){e.exports=a.p+"static/media/021-man-5.1eb5a28c.svg"},162:function(e,t,a){e.exports=a.p+"static/media/022-man-4.67595189.svg"},163:function(e,t,a){e.exports=a.p+"static/media/023-man-3.0ce7816a.svg"},164:function(e,t,a){e.exports=a.p+"static/media/024-man-2.c46d8f7a.svg"},165:function(e,t,a){e.exports=a.p+"static/media/025-man-1.351777d4.svg"},166:function(e,t,a){e.exports=a.p+"static/media/026-man.084ac449.svg"},167:function(e,t,a){e.exports=a.p+"static/media/027-boy-6.2ecb076c.svg"},168:function(e,t,a){e.exports=a.p+"static/media/028-boy-5.a7bd0a9c.svg"},169:function(e,t,a){e.exports=a.p+"static/media/029-boy-4.3fd0abf1.svg"},170:function(e,t,a){e.exports=a.p+"static/media/030-boy-3.ed96e16c.svg"},171:function(e,t,a){e.exports=a.p+"static/media/031-boy-2.c5427690.svg"},172:function(e,t,a){e.exports=a.p+"static/media/032-boy-1.a7a70bc1.svg"},173:function(e,t,a){e.exports=a.p+"static/media/033-boy.4ff5460a.svg"},174:function(e,t,a){e.exports=a.p+"static/media/034-woman-2.94893de5.svg"},175:function(e,t,a){e.exports=a.p+"static/media/035-woman-1.5d0ce5ae.svg"},176:function(e,t,a){e.exports=a.p+"static/media/036-woman.c49d22fe.svg"},197:function(e,t,a){e.exports=a(323)},202:function(e,t,a){},230:function(e,t){},320:function(e,t,a){},322:function(e,t,a){},323:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),c=a.n(o),s=(a(202),a(69)),i=a(41),l=a(133),u=a(134),m=a(184),p=a(9),d=a(6),f=a(137),b=a.n(f),g=a(138),E=a.n(g),h=a(385),v=a(367),O=a(4),y=a(365),x=a(368),j=a(369),w=a(388),k=a(25),S=a(366),C=a(16),T=a(12),N=a.n(T),M=a(19),D=a(31),B=a.n(D),L=function(e){return function(){var t=Object(M.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("about to fetch"),t.next=3,B.a.get("https://chat-by-as.herokuapp.com/messages/rooms/".concat(e));case 3:n=t.sent,a({type:"GET_MESSAGES",payload:n.data});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},P=function(e){return function(t){t({type:"SET_USER_TYPING",payload:e})}},_=(a(261),a(3)),I=Object(O.a)({root:{"& .MuiInputBase-root":{color:"#B0B2B5"},"& .MuiInput-underline:hover:not(.Mui-disabled):before":{borderBottomColor:"#B0B2B5"},"& label.Mui-focused":{color:"#B0B2B5"},"& .MuiInput-underline:before":{borderBottomColor:"#B0B2B5"},"& .MuiInput-underline:after":{borderBottomColor:"#B0B2B5"},"& .MuiOutlinedInput-root":{"& fieldset":{borderBottomColor:"white"},"&:hover fieldset":{borderBottomColor:"#B0B2B5"},"&.Mui-focused fieldset":{borderBottomColor:"#B0B2B5"}}}})(w.a),R=Object(y.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{},alignselfcenter:{alignSelf:"center"},button:{boxShadow:"0px 6px 16px -4px rgba(0,0,0,0.56)",backgroundColor:"#45A29E"},expand:{marginLeft:"auto"}}})),A=Object(C.b)((function(e){return{userTyping:e.userTyping.item,room:e.room.item}}),{postMessage:function(e){return function(){var t=Object(M.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("about to POST"),t.next=3,B.a.post("https://chat-by-as.herokuapp.com/messages",e);case 3:n=t.sent,a({type:"POST_MESSAGE",payload:n.data});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getMessages:L,setUserTyping:P})((function(e){var t=e.postMessage,a=e.setUserTyping,o=e.userTyping,c=e.socket,s=e.room,i=e.name,l=e.avatar,u=R(),m=Object(k.a)(),d=Object(S.a)(m.breakpoints.down("sm")),f=Object(n.useState)(""),b=Object(p.a)(f,2),g=b[0],E=b[1],h=Object(n.useState)(!1),O=Object(p.a)(h,2),y=O[0],w=O[1],C=Object(n.useState)(null),T=Object(p.a)(C,2),N=(T[0],T[1],Object(n.useState)(!1)),M=Object(p.a)(N,2);M[0],M[1];Object(n.useEffect)((function(){c.on("IS_TYPING",(function(e){var t=e.name,n=o;if(" is typing.."!==n&&n!=="".concat(t," is typing..")){var r=n.match(/\S+/g),c=t.concat(" and ".concat(r[0]," are typing... "));a(c)}else{var s=t.concat(n);a(s)}})),c.on("IS_NOT_TYPING",(function(e){var t=e.message;a(t)}))}),[y]);var D=function(){console.log("called typing stopped"),w(!1),c.emit("SEND_IS_NOT_TYPING",{room:s,name:i},(function(e){console.log(e)}))},B=function(e){e.preventDefault(),g&&(console.log("sendeding messaghe"),c.emit("SEND_MESSAGE",g,(function(){E("")}))),t({name:i,avatar:l,message:g,room:s})};return r.a.createElement(v.a,{container:!0},r.a.createElement(v.a,{item:!0,md:10,xl:10,xs:8},r.a.createElement(I,{className:u.margin,id:"filled-full-width",fullWidth:!0,margin:"normal",value:g,onChange:function(e){return function(e){var t;E(e.target.value),!1===y?(console.log("inside is typing"),w(!0),console.log("sending "),c.emit("SEND_IS_TYPING",{room:s,name:i},(function(e){console.log(e)})),t=setTimeout(D,4e3)):(clearTimeout(t),t=setTimeout(D,4e3),clearTimeout(t))}(e)},onKeyPress:function(e){return"Enter"===e.key?B(e):null}})),r.a.createElement(v.a,{item:!0,md:2,xl:2,xs:4,className:u.alignselfcenter+" pl-2"},r.a.createElement(x.a,{variant:"contained",className:u.button,endIcon:r.a.createElement(j.a,null,r.a.createElement("span",{style:{color:"#B0B2B5"}},"send")),size:d?"small":"large",onClick:function(e){B(e)}},"Send")))})),G=a(364),F=a(387),U=a(326),W=a(370),z=a(53),H=a(371),X=a(372),Y=a(373),V=a(141),J=a.n(V),K=a(142),$=a.n(K),q=a(143),Q=a.n(q),Z=a(144),ee=a.n(Z),te=a(145),ae=a.n(te),ne=a(146),re=a.n(ne),oe=a(147),ce=a.n(oe),se=a(148),ie=a.n(se),le=a(149),ue=a.n(le),me=a(150),pe=a.n(me),de=a(151),fe=a.n(de),be=a(152),ge=a.n(be),Ee=a(153),he=a.n(Ee),ve=a(154),Oe=a.n(ve),ye=a(155),xe=a.n(ye),je=a(156),we=a.n(je),ke=a(157),Se=a.n(ke),Ce=a(158),Te=a.n(Ce),Ne=a(159),Me=a.n(Ne),De=a(160),Be=a.n(De),Le=a(161),Pe=a.n(Le),_e=a(162),Ie=a.n(_e),Re=a(163),Ae=a.n(Re),Ge=a(164),Fe=a.n(Ge),Ue=a(165),We=a.n(Ue),ze=a(166),He=a.n(ze),Xe=a(167),Ye=a.n(Xe),Ve=a(168),Je=a.n(Ve),Ke=a(169),$e=a.n(Ke),qe=a(170),Qe=a.n(qe),Ze=a(171),et=a.n(Ze),tt=a(172),at=a.n(tt),nt=a(173),rt=a.n(nt),ot=a(174),ct=a.n(ot),st=a(175),it=a.n(st),lt=a(176),ut=a.n(lt),mt=[J.a,$.a,Q.a,ee.a,ae.a,re.a,ce.a,ie.a,ue.a,pe.a,fe.a,ge.a,he.a,Oe.a,xe.a,we.a,Se.a,Te.a,Me.a,Be.a,Pe.a,Ie.a,Ae.a,Fe.a,We.a,He.a,Ye.a,Je.a,$e.a,Qe.a,et.a,at.a,rt.a,ct.a,it.a,ut.a],pt=Object(y.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},roomsXS:Object(d.a)({},e.breakpoints.down("xs"),{justifyContent:"center"}),avatarMini:{width:"18px",height:"18px"},avatarListMini:{minWidth:"0px",paddingLeft:"4%"},dots:{color:"white !important",paddingLeft:"2%",paddingTop:"4%"}}})),dt=function(e){var t=e.roomName,a=e.users,n=e.index,o=e.currentRoom,c=e.selectedIndex,s=e.handleListItemClick,i=pt(),l=r.a.useState(!1),u=Object(p.a)(l,2),m=u[0],d=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{button:!0,className:i.roomsXS,selected:c===n,onClick:function(e){return function(e,a){t.toLowerCase()===o.toLowerCase()&&d(!m),s(e,a)}(e,n)}},r.a.createElement(F.a,null,r.a.createElement(W.a,null,t)),t.toLowerCase()===o.toLowerCase()&&a.map((function(e,t){var a=e.avatar,n=e.room;return t>4?n.toLowerCase()===o.toLowerCase()&&r.a.createElement(z.a,{component:"span",variant:"caption",className:i.dots},"..."):n.toLowerCase()===o.toLowerCase()&&r.a.createElement(H.a,{key:t,className:i.avatarListMini},r.a.createElement(X.a,{className:i.avatarMini,src:mt[a]}))}))),r.a.createElement(Y.a,{in:c===n&&m,timeout:"auto",unmountOnExit:!0},r.a.createElement(G.a,{dense:!0},a.map((function(e,t){var a=e.avatar,n=e.name;return r.a.createElement(U.a,{key:t},r.a.createElement(H.a,null,r.a.createElement(X.a,{src:mt[a]})),r.a.createElement(W.a,{primary:n}))})))))},ft=a(75),bt=a.n(ft),gt=function(e){return function(t){t({type:"SET_USERS",payload:e})}},Et=Object(y.a)({root:{backgroundColor:"#1F2833",boxShadow:"0px 6px 16px -4px rgba(0,0,0,0.56)",color:"white",overflow:"auto",height:"100%"},room:{backgroundColor:"#1F2833"},messageBox:{alignItems:"flex-end"}}),ht=Object(C.b)((function(e){return{users:e.users.items,room:e.room.item}}),{setUsers:gt,getMessages:L,setRoom:function(e){return function(t){t({type:"SET_ROOM",payload:e})}}})((function(e){var t=e.socket,a=e.room,o=e.setRoom,c=e.setUsers,s=e.getMessages,i=e.users,l=Et(),u=r.a.useState(0),m=Object(p.a)(u,2),d=m[0],f=m[1],b=Object(n.useState)([]),g=Object(p.a)(b,2),E=g[0],h=g[1],v=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e})),t.current}(a),O=["Main","Chill","Evening","Room1","Room2","Room3"];Object(n.useEffect)((function(){if(v||h(O),a!==v&&v)return t.emit("CHANGE_ROOM",{room:a},(function(e){console.log(e)})),t.on("roomData",(function(e){var t=e.users;c(t)})),function(){t.emit("disconnect"),t.off()}}),[a]);var y=function(){var e=Object(M.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a!==t){e.next=2;break}return e.abrupt("return");case 2:s(t),o(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e,t){e.preventDefault(),y(E[t].toLowerCase()),f(t)};return console.log(a),r.a.createElement(bt.a,{className:l.root},r.a.createElement(G.a,{className:l.room},O.map((function(e,t){return r.a.createElement(F.a,{key:t},r.a.createElement(dt,{roomName:e,index:t,users:i,currentRoom:a,selectedIndex:d,handleListItemClick:x}))}))))})),vt=a(391),Ot=a(377),yt=a(378),xt=a(379),jt=a(380),wt=a(183),kt=a(374),St=a(375),Ct=a(376),Tt=a(177),Nt=a.n(Tt),Mt=a(62),Dt=a(61),Bt=a.n(Dt),Lt=a(178),Pt=a.n(Lt),_t=Object(O.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return r.a.createElement(wt.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},e))})),It=Object(O.a)((function(e){return{root:{"&:hover":{backgroundColor:e.palette.grey,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.white}}}}}))(kt.a),Rt=Object(C.b)((function(e){return{room:e.room.item}}),{deleteMessage:function(e){return function(){var t=Object(M.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("about to delete",e),t.next=3,B.a.delete("https://chat-by-as.herokuapp.com/messages/id/".concat(e));case 3:t.sent,a({type:"DELETE_MESSAGE",id:e});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.deleteMessage,a=e.onEdit,o=e.id,c=e.room,s=e.socket,i=Object(n.useState)(!1),l=Object(p.a)(i,2),u=(l[0],l[1],r.a.useState(null)),m=Object(p.a)(u,2),d=m[0],f=m[1];return r.a.createElement(F.a,null,r.a.createElement(St.a,{onClick:function(e){f(e.currentTarget)}},r.a.createElement(Bt.a,{path:Mt.a,title:"Menu",size:1,color:"white"})),r.a.createElement(_t,{id:"customized-menu",anchorEl:d,keepMounted:!0,open:Boolean(d),onClose:function(){f(null)}},r.a.createElement(It,{onClick:function(e){e.preventDefault(),function(e){t(e),s.emit("DELETE",{room:c,id:e},(function(){}))}(o)}},r.a.createElement(Ct.a,null,r.a.createElement(Nt.a,{color:"secondary"})),r.a.createElement(W.a,{primary:r.a.createElement(z.a,{component:"span",className:"pl-3",variant:"body2"},"Delete")})),r.a.createElement(It,{onClick:function(e){e.preventDefault(),a(o)}},r.a.createElement(Ct.a,null,r.a.createElement(Pt.a,{color:"primary"})),r.a.createElement(W.a,{primary:r.a.createElement(z.a,{component:"span",className:"pl-3",variant:"body2"},"Edit")}))))})),At=a(76),Gt=a.n(At),Ft=(a(297),Object(y.a)((function(e){return{whiteText:{color:"white !important"},date:{color:"grey !important",fontSize:"12px !important"},menuRight:{textAlign:"right"}}}))),Ut={lastDay:"[Yesterday at] LT",sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",lastWeek:"[last] dddd [at] LT",nextWeek:"dddd [at] LT",sameElse:"L"},Wt=Object(C.b)((function(e){return{room:e.room.item}}),{editMessage:function(e,t){return function(){var a=Object(M.a)(N.a.mark((function a(n){return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("about to edit"),a.next=3,B.a.put("https://chat-by-as.herokuapp.com/messages/id/".concat(e),{message:t});case 3:a.sent,n({type:"EDIT_MESSAGE",id:e,message:t});case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.message,a=e.name,o=e.date,c=e.avatar,s=e.editMessage,i=e.id,l=e.room,u=e.socket,m=Ft(),d=Object(n.useState)(!1),f=Object(p.a)(d,2),b=f[0],g=f[1],E=Object(n.useState)(t),h=Object(p.a)(E,2),v=h[0],O=h[1],y=function(){g(!b)},j=function(e){e.preventDefault(),s(i,v),g(!1),u.emit("EDIT",{room:l,id:i},(function(){}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{alignItems:"flex-start"},r.a.createElement(H.a,null,r.a.createElement(X.a,{src:mt[c]})),r.a.createElement(W.a,{primary:r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,null,a+"  ",r.a.createElement(Gt.a,{calendar:Ut,className:m.date},o))),secondary:r.a.createElement(r.a.Fragment,null,!b&&r.a.createElement(z.a,{component:"span",variant:"body2",className:m.whiteText},t))}),b&&r.a.createElement(vt.a,{open:!0,onClose:y,"aria-labelledby":"form-dialog-title"},r.a.createElement(Ot.a,{id:"form-dialog-title"},"Edit"),r.a.createElement(yt.a,null,r.a.createElement(xt.a,null,"Edit the message.."),r.a.createElement(w.a,{id:"standard-name",autoFocus:!0,value:v,onChange:function(e){return function(e){e.preventDefault(),O(e.target.value)}(e)},margin:"normal",fullWidth:!0,onKeyPress:function(e){return"Enter"===e.key?j(e):null}})),r.a.createElement(jt.a,null,r.a.createElement(x.a,{onClick:y,color:"secondary"},"Cancel"),r.a.createElement(x.a,{onClick:function(e){!function(e){g(!b),j(e)}(e)},color:"primary"},"Edit"))),"Admin"!==a&&r.a.createElement(F.a,{className:m.menuRight},r.a.createElement(Rt,{onEdit:function(e){g(!0)},id:i,socket:u}))))})),zt=Object(y.a)({"@global":{"*::-webkit-scrollbar":{width:"0.4em"},"*::-webkit-scrollbar-track":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.00)"},"*::-webkit-scrollbar-thumb":{backgroundColor:"#B0B2B5",outline:"1px solid slategrey",borderRadius:"100px"}},root:{backgroundColor:"#1F2833",boxShadow:"0px 6px 16px -4px rgba(0,0,0,0.56)",color:"white",overflow:"auto",height:"100%"},messageBox:{alignItems:"flex-end"},scrollBtn:{backgroundColor:"#B0B2B5"}}),Ht=Object(C.b)((function(e){return{messages:e.messages.items,room:e.room.item}}),{getMessages:L,setMessage:function(e){return function(){var t=Object(M.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("about to SET"),a({type:"POST_MESSAGE",payload:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setUsers:gt,setUserTyping:P})((function(e){var t=e.socket,a=e.messages,o=e.setUsers,c=e.setMessage,s=e.getMessages,i=e.setUserTyping,l=e.room,u=e.name,m=zt();return Object(n.useEffect)((function(){s("main")}),[s]),Object(n.useEffect)((function(){return console.log("called message effect"),t.on("message",(function(e){switch(console.log(e,"GOT THIS"),e.type){case"MESSAGE":e.name!==u.toLowerCase()&&c(e);break;case"LEFT":i(" is typing..");break;case"DELETE":console.log("about to set the timeout"),setTimeout((function(){return s(l)}),2e3);break;case"EDIT":setTimeout((function(){return s(l)}),2e3);break;default:c(e)}})),t.on("roomData",(function(e){var t=e.users;o(t)})),function(){t.emit("disconnect"),t.off()}}),[a]),r.a.createElement(bt.a,{className:m.root,followButtonClassName:m.scrollBtn},r.a.createElement(G.a,null,a.map((function(e,a){return r.a.createElement(F.a,{key:e._id?e._id:a,className:m.messageBox},r.a.createElement(Wt,{message:e.message,avatar:e.avatar,name:e.name,date:e.date,id:e._id,socket:t}))}))))})),Xt=a(383),Yt=a(384),Vt=a(390),Jt=a(392),Kt=a(363),$t=a(394),qt=a(382),Qt=a(8),Zt=a(179),ea=a.n(Zt),ta=a(381),aa=Object(y.a)((function(e){return{root:{flexGrow:1},title:Object(d.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(d.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Qt.c)(e.palette.common.white,.9),"&:hover":{backgroundColor:Object(Qt.c)(e.palette.common.white,.9)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"black"},inputInput:Object(d.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}}),date:{color:"grey !important",fontSize:"12px !important"},expand:{marginLeft:"auto"},expandOpen:{}}})),na=Object(O.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return r.a.createElement(wt.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},e))})),ra=Object(O.a)((function(e){return{root:{"&:focus":{backgroundColor:e.palette.primary.main,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.white}}}}}))(kt.a),oa=Object(O.a)({root:{color:ta.a[400],"&$checked":{color:ta.a[600]}},checked:{}})((function(e){return r.a.createElement(Vt.a,Object.assign({color:"default"},e))})),ca={lastDay:"[Yesterday at] LT",sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",lastWeek:"[last] dddd [at] LT",nextWeek:"dddd [at] LT",sameElse:"L"},sa=Object(C.b)((function(e){return{messages:e.messages.searchedResults,room:e.room.item}}),{searchMessage:function(e,t,a){return function(){var n=Object(M.a)(N.a.mark((function n(r){var o,c;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=0===a?"".concat(t):"room/".concat(e,"/").concat(t),n.next=3,B.a.get("https://chat-by-as.herokuapp.com/messages/search/".concat(o));case 3:c=n.sent,r({type:"SEARCH_MESSAGE",payload:c.data});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.searchMessage,a=e.messages,n=e.room,o=aa(),c=r.a.useState(null),s=Object(p.a)(c,2),i=s[0],l=s[1],u=r.a.useState(-1),m=Object(p.a)(u,2),f=m[0],b=m[1],g=r.a.useState("a"),E=Object(p.a)(g,2),h=E[0],v=E[1],O=r.a.useState(""),y=Object(p.a)(O,2),x=y[0],j=y[1],w=function(e){e.preventDefault(),l(e.currentTarget),t(n,x,1)};return r.a.createElement("div",{className:o.search},r.a.createElement(St.a,{onClick:function(e){return w(e)}},r.a.createElement("div",{className:o.searchIcon},r.a.createElement(ea.a,null))),r.a.createElement(Jt.a,{placeholder:"Search\u2026",onChange:function(e){e.preventDefault(),function(e){j(e)}(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?w(e):null},classes:{root:o.inputRoot,input:o.inputInput},inputProps:{"aria-label":"search"}}),r.a.createElement(na,{id:"customized-menu",anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:function(){l(null)}},r.a.createElement(F.a,{className:"pl-3 d-flex "},r.a.createElement(Kt.a,{component:"fieldset"},r.a.createElement($t.a,{"aria-label":"position",name:"position",value:h,onChange:function(e){v(e.target.value),t(n,x,"c"===e.target.value?0:1)},row:!0,className:"d-flex flex-nowrap"},r.a.createElement(qt.a,{value:"end",control:r.a.createElement(Vt.a,{checked:"a"===h,value:"a",name:"radio-button-demo",inputProps:{"aria-label":"A"}}),label:"This room",labelPlacement:"end"}),r.a.createElement(qt.a,{value:"end",control:r.a.createElement(oa,{checked:"c"===h,value:"c",name:"radio-button-demo",inputProps:{"aria-label":"C"}}),label:"All rooms",labelPlacement:"end"})))),a.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(ra,{key:t,className:Object(_.a)(o.expand,Object(d.a)({},o.expandOpen,f===t)),onClick:function(){var e;b(f===(e=t)?-1:e)},"aria-expanded":f===t,"aria-label":"show more"},r.a.createElement(H.a,null,r.a.createElement(X.a,{src:mt[e.avatar]})),r.a.createElement(W.a,{primary:r.a.createElement(r.a.Fragment,null,e.name+" ",r.a.createElement(Gt.a,{calendar:ca,className:o.date},e.date))})),r.a.createElement(Y.a,{in:f===t,timeout:"auto",unmountOnExit:!0},r.a.createElement(z.a,{component:"span",variant:"body2"},e.message)))}))))})),ia=Object(y.a)((function(e){return{root:{flexGrow:1},title:Object(d.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"})}})),la=function(e){e.searchMessages,e.searchMessagesResult;var t=ia();return r.a.createElement("div",{className:t.root},r.a.createElement(Xt.a,{position:"static",style:{backgroundColor:"#1F2833"}},r.a.createElement(Yt.a,{variant:"dense"},r.a.createElement(z.a,{className:t.title,style:{color:"#66FCF1",fontWeight:"bold"},variant:"h4",noWrap:!0},"Let's Chat!"),r.a.createElement(sa,null))))},ua=Object(C.b)((function(e){return{userTyping:e.userTyping.item}}),{})((function(e){var t=e.userTyping;return r.a.createElement(z.a,{component:"span",variant:"caption",style:{color:"white"}}," is typing.."!==t&&t)})),ma=a(393),pa=Object(C.b)((function(e){return{room:e.room.item}}),{getMessages:L,getLatestMessages:function(e){return function(){var t=Object(M.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.a.get("https://chat-by-as.herokuapp.com/messages/latest/".concat(e));case 2:n=t.sent,a({type:"GET_MESSAGES",payload:n.data.reverse()});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.room,a=e.getMessages,n=e.getLatestMessages;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ma.a,{style:{backgroundColor:"#1F2833",boxShadow:"0px 6px 16px -4px rgba(0,0,0,0.56)"},avatar:r.a.createElement(Bt.a,{path:Mt.b,title:"reload",size:1,color:"white"}),label:r.a.createElement(z.a,{component:"span",variant:"caption",style:{color:"white"}},"Fetch all"),onClick:function(e){e.preventDefault(),a(t)},variant:"outlined"}),r.a.createElement(ma.a,{style:{backgroundColor:"#1F2833",boxShadow:"0px 6px 16px -4px rgba(0,0,0,0.56)"},avatar:r.a.createElement(Bt.a,{path:Mt.b,title:"reload",size:1,color:"white"}),label:r.a.createElement(z.a,{component:"span",variant:"caption",style:{color:"white"}},"Last 10"),onClick:function(e){e.preventDefault(),n(t)},variant:"outlined",className:"ml-2"}))})),da="https://chat-by-as.herokuapp.com/",fa=b()(da,{autoConnect:!1}),ba=Object(y.a)((function(e){var t,a;return{chipsXS:Object(d.a)({},e.breakpoints.down("xs"),{display:"flex",justifyContent:"space-evenly"}),roomHeightBreak:(t={},Object(d.a)(t,e.breakpoints.between("xs","sm"),{paddingRight:"0px",paddingLeft:"0px"}),Object(d.a)(t,e.breakpoints.between("lg","xl"),{height:"80vh",paddingRight:"0px"}),Object(d.a)(t,e.breakpoints.only("lg"),{height:"75vh",paddingRight:"0px"}),t),messageHeightBreak:(a={},Object(d.a)(a,e.breakpoints.between("xs","sm"),{height:"33vh",paddingRight:"0px",paddingLeft:"0px"}),Object(d.a)(a,e.breakpoints.between("lg","xl"),{height:"80vh",paddingRight:"0px"}),Object(d.a)(a,e.breakpoints.only("sm"),{height:"50vh",paddingRight:"0px"}),Object(d.a)(a,e.breakpoints.only("lg"),{height:"75vh",paddingRight:"0px"}),a)}})),ga=Object(C.b)((function(e){return{room:e.room.item}}),{removeUser:function(e){return function(){var t=Object(M.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"REMOVE_USER",id:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.location,a=e.removeUser,o=e.room,c=ba(),s=Object(n.useState)(""),i=Object(p.a)(s,2),l=i[0],u=i[1],m=Object(n.useState)(0),d=Object(p.a)(m,2),f=d[0],b=d[1];return Object(n.useEffect)((function(){fa.open();var e=E.a.parse(t.search),n=e.name,r=e.avatar;return u(n),b(r),console.log("about to emit join"),fa.emit("join",{name:n,avatar:r,room:o},(function(e){console.log("inside join emit, added user"),console.log(e)})),function(){console.log("unmounted"),console.log(fa.id),a(fa.id),fa.emit("disconnect"),fa.off(),fa.close()}}),[da,t.search]),r.a.createElement("div",{className:"App"},r.a.createElement(h.a,{maxWidth:"xl"},r.a.createElement(v.a,{container:!0},r.a.createElement(v.a,{item:!0,md:12,xl:12,xs:12},r.a.createElement(la,null)),r.a.createElement(v.a,{item:!0,md:2,xl:2,sm:12,xs:12,className:"mt-3"},r.a.createElement(F.a,{className:c.roomHeightBreak},r.a.createElement(ht,{socket:fa})),r.a.createElement(F.a,{className:"mt-4"},r.a.createElement(F.a,{className:c.chipsXS},r.a.createElement(pa,null)))),r.a.createElement(v.a,{item:!0,md:10,xl:10,xs:12},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:c.messageHeightBreak+" col-md-12 mt-3"},r.a.createElement(Ht,{socket:fa,name:l}))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-md-12 col-xs-12"},r.a.createElement(A,{socket:fa,name:l,avatar:f}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 col-xs-6 text-left"},r.a.createElement(ua,null)),r.a.createElement("div",{className:"col-md-6 col-xs-6 text-right pt-2"},r.a.createElement(z.a,{component:"span",variant:"caption",style:{color:"white"}},"Made with \u2764 by Ali Shadman"))))))))})),Ea=a(78),ha=a(386),va=a(14),Oa=a(180),ya=a.n(Oa),xa=(a(320),Object(y.a)((function(e){return{expand:{marginLeft:"auto"},avatarSelected:{backgroundColor:"rgba(0, 0, 0, 0.08) !important"}}}))),ja=function(e){var t=e.onAvtClick,a=xa(),o=Object(n.useState)(!1),c=Object(p.a)(o,2),s=c[0],i=c[1],l=Object(n.useState)([0,12]),u=Object(p.a)(l,2),m=u[0],f=(u[1],Object(n.useState)(0)),b=Object(p.a)(f,2),g=b[0],E=b[1],h=function(e,t){return 0===e?g===t:1===e?g===t+12:2===e?g===t+24:void 0};return r.a.createElement(F.a,null,r.a.createElement(St.a,{className:Object(_.a)(a.expand,Object(d.a)({},a.expandOpen,s)),onClick:function(){i(!s)},"aria-expanded":s,"aria-label":"show more"},r.a.createElement(X.a,{src:mt[g]})),r.a.createElement(Y.a,{in:s,timeout:"auto",unmountOnExit:!0},r.a.createElement(ya.a,null,function(){var e=Array(mt.length/12).fill(0),n=Object(va.a)(m);return e.map((function(e,o){return 0!==o&&(n[0]+=12,n[1]+=12),r.a.createElement(v.a,{container:!0,className:"mb-2 pl-2 pr-2 mt-2",key:o},mt.slice(n[0],n[1]).map((function(e,n){return r.a.createElement(v.a,{md:2,item:!0,key:n,className:"d-inline-flex  justify-content-center"},r.a.createElement(St.a,{onClick:function(e){var a,r;e.preventDefault(),r=n,0===(a=o)&&(E(r),t(r)),1===a&&(E(r+12),t(r+12)),2===a&&(E(r+24),t(r+24))},disabled:h(o,n),className:h(o,n)?a.avatarSelected:""},r.a.createElement(X.a,{src:e})))})))}))}())))},wa=Object(O.a)({root:{"& label.Mui-focused":{color:"#C5C6C7"},"& .MuiInput-underline:after":{borderBottomColor:"#C5C6C7"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#C5C6C7"},"&:hover fieldset":{borderBottomColor:"#C5C6C7"},"&.Mui-focused fieldset":{borderColor:"#C5C6C7"}}}})(w.a),ka=Object(y.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing(1)},floatingLabelFocusStyle:{color:"white"}}})),Sa=function(){var e=ka(),t=Object(n.useState)(""),a=Object(p.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(0),i=Object(p.a)(s,2),l=i[0],u=i[1];return r.a.createElement(h.a,{maxWidth:"sm",className:"d-flex flex-column justify-content-center vh-100"},r.a.createElement(F.a,Object.assign({borderRadius:16},{borderColor:"#45A29E",m:5,border:3},{style:{backgroundColor:"#1F2833"}}),r.a.createElement(F.a,{className:"text-center"},r.a.createElement(z.a,{variant:"h2",style:{color:"#66FCF1",fontWeight:"bold"}},"Join")),r.a.createElement(ha.a,{variant:"middle"}),r.a.createElement(F.a,{className:"text-center"},r.a.createElement(wa,{InputLabelProps:{style:{color:"#C5C6C7"}},InputProps:{style:{color:"#C5C6C7"}},className:e.margin,id:"custom-css-standard-input",label:"Username",value:o,onChange:function(e){c(e.target.value)}})),r.a.createElement(F.a,{className:"text-center pt-2"},r.a.createElement(ja,{onAvtClick:function(e){u(e)}})),r.a.createElement(F.a,{className:"text-center pt-2 pb-2"},r.a.createElement(Ea.b,{onClick:function(e){return o?null:e.preventDefault()},to:"/chat?name=".concat(o,"&avatar=").concat(l)},r.a.createElement(x.a,{variant:"contained",style:{backgroundColor:"#45A29E"}},"Go")))))},Ca=a(45),Ta=a(43),Na=a(182);function Ma(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Da(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ma(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ma(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ba={items:[],item:[],searchedResults:[]};function La(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Pa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?La(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):La(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _a={items:[],item:[]};function Ia(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ra(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ia(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ia(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Aa={item:"main"};function Ga(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Fa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ga(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ga(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ua={item:" is typing.."},Wa=Object(Ta.c)({messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"POST_MESSAGE":return Da({},e,{items:[].concat(Object(va.a)(e.items),[t.payload])});case"GET_MESSAGES":var a=Object(va.a)(e.items),n=Object(va.a)(t.payload);return a[0]&&"Admin"===a[0].name&&n.push(a[0]),Da({},e,{items:a[0]?n:t.payload});case"DELETE_MESSAGE":var r=Object(va.a)(e.items);return console.log(r.filter((function(e){return e._id!==t.id}))),Da({},e,{items:r.filter((function(e){return e._id!==t.id}))});case"EDIT_MESSAGE":var o=Object(va.a)(e.items),c=o.find((function(e){return e._id===t.id}));c.message=t.message;var s=o.findIndex((function(e){return e._id===t.id}));return o.splice(s,1,c),Da({},e,{items:o});case"SEARCH_MESSAGE":return Da({},e,{searchedResults:t.payload});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return Pa({},e,{items:[].concat(Object(va.a)(e.items),[t.payload])});case"SET_USERS":return Pa({},e,{items:t.payload});case"REMOVE_USER":var a=Object(va.a)(e.items).filter((function(e){return e.id!==t.id}));return console.log(a),Pa({},e,{items:a});default:return e}},room:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Aa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROOM":return Ra({},e,{item:t.payload});default:return e}},userTyping:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ua,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_TYPING":return Fa({},e,{item:t.payload});default:return e}}}),za=(a(322),[Na.a]),Ha=Object(Ta.e)(Wa,{},Object(Ta.d)(Ta.a.apply(void 0,za),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),Xa=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(C.a,{store:Ha},r.a.createElement(Ea.a,null,r.a.createElement(Ca.a,{path:"/",exact:!0,component:Sa}),r.a.createElement(Ca.a,{path:"/chat",component:ga})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Xa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[197,1,2]]]);
//# sourceMappingURL=main.5cb50939.chunk.js.map